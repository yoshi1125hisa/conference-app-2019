branches:
  only:
  - enable_travis
  - master
  - release
  - "/^v\\d+\\.\\d+(\\.\\d+)?(-\\S*)?$/"
matrix:
  include:
  - language: android
    sudo: required
    jdk: oraclejdk8
    before_cache:
    - rm -f  $HOME/.gradle/caches/modules-2/modules-2.lock
    - rm -rf $HOME/.gradle/caches/*/plugin-resolution/
    cache:
      directories:
      - "$HOME/.gradle"
      - "$HOME/.android"
      - ".gradle"
    before_install:
    - "./.travis/android/before_install.bash"
    android:
      components:
      - platform-tools
      - android-28
      - build-tools-28.0.3
      - extra-google-m2repository
      - extra-android-m2repository
      - tools
      licenses:
      - android-sdk-preview-license-.+
      - android-sdk-license-.+
      - google-gdk-license-.+
    script: ".travis/android/run.bash"
  - language: objective-c
    os: osx
    osx_image: xcode10.1
    xcode_workspace: frontend/ios/DroidKaigi\ 2019.xcworkspace
    cache:
    - directories:
      - ios/frontend/vendor/bundle
      - ios/frontend/Pods
      - ios/frontend/Carthage
      - "$HOME/.gradle"
      - "$HOME/.android"
      - ".gradle"
    before_install:
    - "./.travis/ios/before_install.bash"
    script: ".travis/ios/run.bash"
env:
  matrix:
    secure: EROWYQpBxPPy640nt3EfwoSHutbzt/6UW3KvDC2e3O6WzyoV7Ffi3X2kR1QKBp40fvoZuaOESPCEEBKNHthmm1ACXdQB+4o5Y5UNYMXvWB2QrABkVveUis1mwZ4GnIFipG/+3AxFQoHTvK0C6AFqL8nSOtJqp0Tl6pJU+26Ln9MbgWgHY/vDK+tGEsEIRcnZAVLE7hMUENVe6HwY6e2gDGZXL/wdEE8sXEKaab33jlsL2SjevntXKXECiHHc+aKd6koo6/XhW3c4meHIlc0oBMMuKIBCfJmGSIlZveMdj4yUzrwMQcUKVDInDI1/5jQNITVgASE9eQSK6YYrAw5o4oiwYhlGe6qJdpN3RJ+ezb8yCfmewsgtauB85LcVs0iWiLawzRWO9aqqwJXE8cC73uEMlQRqVsmIGLO53iiTul7nbq6IVe43dhHKAtpvnjpc3YuknaqLpbkS8tyz0gSHXbyT6Nre8cXb095D/NS9tB4auFiVaeXszWHiKzG9hS2UR4RSvCBsvp+XqtiJcTVqVeX8xKM4ixKFEnfim5KMyEpK4qeuOVhsDwRZFPwsOCZFfBabiSeOIIjUIycSqs3pXwdi5CdJmNpg/5gWllrpO7q3Pv6w2QCreGFFPJkJkx1uYdFqobGlu+FbCK+YidEBKOcz5Gkvy6rlS0cW4/vlyHk=
